(()=>{"use strict";gsap.registerPlugin(ScrollTrigger);class e{constructor(e,t){this.input=e,this.startTime=t.startTime||"10:00",this.endTime=t.endTime||"19:30",this.timeInterval=30,this.timepicker=null,this.createTimepicker(),this.addEventListeners()}createTimepicker(){this.timepicker=document.createElement("div"),this.timepicker.classList.add("timepicker"),this.timepicker.style.display="none";const e=document.createElement("div");e.classList.add("timepicker__items");let t=this.parseTime(this.startTime);const r=this.parseTime(this.endTime);for(;t<=r;){const r=this.formatTime(t),n=document.createElement("button");n.type="button",n.classList.add("timepicker__item"),n.textContent=r,n.addEventListener("click",(()=>{this.input.value=r,this.hideTimepicker()})),e.appendChild(n),t=this.addMinutes(t,this.timeInterval)}this.timepicker.appendChild(e),this.input.insertAdjacentElement("afterend",this.timepicker)}addEventListeners(){this.input.addEventListener("focus",(()=>{this.showTimepicker()})),this.input.addEventListener("blur",(e=>{e.relatedTarget?.closest(".timepicker")||this.hideTimepicker()}))}showTimepicker(){this.timepicker.style.display="block",this.input.setAttribute("placeholder",this.input.getAttribute("placeholder").replace("↓","↑")),this.input.classList.add("focus-timepicker")}hideTimepicker(){this.timepicker.style.display="none",this.input.setAttribute("placeholder",this.input.getAttribute("placeholder").replace("↑","↓")),this.input.classList.remove("focus-timepicker")}parseTime(e){const[t,r]=e.split(":").map(Number),n=new Date;return n.setHours(t,r,0,0),n}formatTime(e){return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}addMinutes(e,t){return new Date(e.getTime()+6e4*t)}}class t{constructor(e,t){this.element=e,this.currentDate=new Date,this.selectedDate=new Date,this.createDatepicker(),this.init()}createDatepicker(){this.datepicker=document.createElement("div"),this.datepicker.classList.add("datepicker"),this.datepicker.style.display="none";const e=document.createElement("div");e.classList.add("datepicker__body"),this.grid=document.createElement("div"),this.grid.classList.add("datepicker__grid"),e.appendChild(this.grid);const t=document.createElement("div");t.classList.add("datepicker__footer"),this.prevButton=document.createElement("button"),this.prevButton.type="button",this.prevButton.classList.add("datepicker__prev"),this.prevButton.textContent="←",this.pagination=document.createElement("span"),this.pagination.classList.add("datepicker__pagination"),this.nextButton=document.createElement("button"),this.nextButton.type="button",this.nextButton.classList.add("datepicker__next"),this.nextButton.textContent="→",t.appendChild(this.prevButton),t.appendChild(this.pagination),t.appendChild(this.nextButton),this.datepicker.appendChild(e),this.datepicker.appendChild(t),this.element.insertAdjacentElement("afterend",this.datepicker)}init(){this.element.addEventListener("focus",(()=>{this.show()})),this.element.addEventListener("blur",(e=>{e.relatedTarget?.closest(".datepicker")||this.hide()})),this.element.addEventListener("clear",(()=>{this.currentDate=new Date,this.selectedDate=new Date,this.render()})),this.prevButton.addEventListener("click",(()=>this.changeMonth(-1))),this.nextButton.addEventListener("click",(()=>this.changeMonth(1))),this.render()}show(){this.datepicker.style.display="block",this.element.setAttribute("placeholder",this.element.getAttribute("placeholder").replace("↓","↑")),this.element.classList.add("focus-datepicker")}hide(){this.datepicker.style.display="none",this.element.setAttribute("placeholder",this.element.getAttribute("placeholder").replace("↑","↓")),this.element.classList.remove("focus-datepicker")}handleOutsideClick(e){this.datepicker.contains(e.target)||e.target===this.element||this.hide()}changeMonth(e){this.currentDate.setMonth(this.currentDate.getMonth()+e),this.render()}render(){this.grid.innerHTML="";const e=this.currentDate.getFullYear(),t=this.currentDate.getMonth();this.pagination.textContent=`${String(t+1).padStart(2,"0")}/12`;const r=new Date(e,t+1,0).getDate(),n=this.getFirstDayOfMonth(t,e),i=new Date(e,t,0).getDate();for(let e=n;e>0;e--){const t=i-e+1,r=this.createDayButton(t,"greyed");this.grid.appendChild(r)}for(let n=1;n<=r;n++){const r=this.createDayButton(n);n===this.selectedDate.getDate()&&t===this.selectedDate.getMonth()&&e===this.selectedDate.getFullYear()&&r.classList.add("selected"),this.grid.appendChild(r)}const o=42-(n+r);for(let e=1;e<=o;e++){const t=this.createDayButton(e,"greyed");this.grid.appendChild(t)}}getFirstDayOfMonth(e,t){const r=new Date(t,e,1).getDay();return 0===r?6:r-1}createDayButton(e,t=""){const r=document.createElement("button");return r.textContent=e,r.type="button",t&&r.classList.add(t),r.addEventListener("click",(()=>{this.selectedDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),e),this.element.value=this.formatDate(this.selectedDate),this.render(),this.hide()})),r}formatDate(e){return`${String(e.getDate()).padStart(2,"0")}.${String(e.getMonth()+1).padStart(2,"0")}.${e.getFullYear()}`}}document.addEventListener("DOMContentLoaded",(()=>{function r(e){e.classList.contains("active")?document.querySelectorAll(".header__menu-cart").forEach((e=>{e.innerHTML++})):document.querySelectorAll(".header__menu-cart").forEach((e=>{e.innerHTML--})),n(),setTimeout((()=>{i()}),2e3),document.querySelectorAll(".header__menu-cart").forEach((e=>{e.innerHTML>0?e.classList.add("active"):e.classList.remove("active")}))}function n(){let e=document.querySelector(".header__logo");e.classList.contains("clip-logo")&&(document.querySelector(".header-fixed").classList.add("visible"),document.querySelector(".header-static").classList.add("hide"),e.classList.add("visible"))}function i(){document.querySelector(".header-fixed").classList.remove("visible"),document.querySelector(".header-static").classList.remove("hide"),document.querySelector(".header__logo").classList.remove("visible")}(()=>{const e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};function t(){e.any()||window.innerWidth<992?(document.body.classList.remove("_pc"),document.body.classList.add("_touch")):(document.body.classList.remove("_touch"),document.body.classList.add("_pc"))}t(),window.addEventListener("resize",(()=>{t()}))})(),function(e){let t=new Image;t.onload=t.onerror=function(){1==(2==t.height)?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{function e(e){e.value.length>0?e.classList.add("_input"):e.classList.remove("_input")}document.querySelectorAll(".form__field > .form__input, .form__field > .form__textarea").forEach((t=>{const r=t=>e(t.target);["input","blur","focus","change","keyup","mouseup"].forEach((e=>{t.addEventListener(e,r)})),e(t)}))})(),(()=>{function e(e){if(!e)return;const t=window.innerWidth<1600,r=!!e.closest(".header_sm"),n=t?50:80,i=e.closest(".popup")||window,o=e.querySelector(".header__logo-current"),s=n/3;gsap.set(e,{scale:1}),gsap.set(o,{autoAlpha:1});const a=t?0:.465;ScrollTrigger.create({trigger:e,scroller:i,start:0,end:r?0:3*s,scrub:!0,onUpdate:t=>{const r=t.progress,n=1-a*r;gsap.to(e,{scale:n,duration:0})},onEnter:()=>{e.classList.add("init-animation")},onLeaveBack:()=>{e.classList.remove("init-animation")}}),ScrollTrigger.create({trigger:e,scroller:i,start:r?0:3*s,end:r?s:n,scrub:!0,onUpdate:t=>{gsap.to(o,{autoAlpha:1,duration:0}),gsap.to(e,{scale:1-a,duration:0})},onLeave:()=>{e.classList.add("clip-logo")},onEnterBack:()=>{e.classList.remove("clip-logo"),setTimeout((()=>{o.style=""}),0)}}),ScrollTrigger.create({trigger:e,scroller:i,start:n,end:"+=300",scrub:!0,onUpdate:t=>{gsap.to(o,{autoAlpha:0,duration:0}),gsap.to(e,{scale:1-a,duration:0})}})}document.querySelectorAll(".header__logo").forEach((t=>{e(t)})),window.addEventListener("resize",(function(){ScrollTrigger.getAll().forEach((e=>e.kill())),document.querySelectorAll(".header__logo").forEach((t=>{t.classList.remove("clip-logo"),e(t)}))}))})(),(()=>{var e=document.querySelectorAll('input[type="tel"]'),t=function(e){return e.value.replace(/\D/g,"")},r=function(e){var r=e.target,n=t(r),i=e.clipboardData||window.clipboardData;if(i){var o=i.getData("Text");if(/\D/g.test(o))return void(r.value=n)}},n=function(e){var r=e.target,n=t(r),i=r.selectionStart,o="";if(!n)return r.value="";if(r.value.length==i){if(["7","8","9"].indexOf(n[0])>-1){"9"==n[0]&&(n="7"+n);var s="8"==n[0]?"8":"+7";o=r.value=s+" ",n.length>1&&(o+="("+n.substring(1,4)),n.length>=5&&(o+=") "+n.substring(4,7)),n.length>=8&&(o+="-"+n.substring(7,9)),n.length>=10&&(o+="-"+n.substring(9,11))}else o="+"+n.substring(0,16);r.value=o}else e.data&&/\D/g.test(e.data)&&(r.value=n)},i=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(var o of e)o.addEventListener("keydown",i),o.addEventListener("input",n,!1),o.addEventListener("paste",r,!1)})(),(()=>{if(!document.querySelector(".products__filters"))return;const e=document.querySelectorAll(".products__filters-column"),t=document.querySelectorAll('input[name="start-price"], input[name="end-price"]');let r;function n(e){const t=e.querySelector(".products__filters-clear");e.querySelector(".products__filters-input:checked")?t.classList.remove("hidden"):t.classList.add("hidden")}function i(){clearTimeout(r),r=setTimeout((()=>{}),300)}document.querySelector(".products__filters"),e.forEach((e=>{const t=e.querySelector(".products__filters-clear"),r=e.querySelectorAll(".products__filters-input");r.length>0&&r.forEach((t=>{t.addEventListener("change",(()=>{n(e),i()}))})),t&&t.addEventListener("click",(()=>{r.forEach((e=>{e.checked=!1})),n(e),i()}))})),t.forEach((e=>{e.addEventListener("keydown",(e=>{e.key>="0"&&e.key<="9"||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.preventDefault()})),e.addEventListener("focus",(()=>{e.value=e.value.replace(" ₽/м²","")})),e.addEventListener("blur",(()=>{const t=e.value.replace(/\D/g,"");0!==e.value.length&&(e.value=`${t} ₽/м²`,i())}))}))})(),(()=>{var e,t=("cookie_notice",(e=document.cookie.match(new RegExp("(?:^|; )"+"cookie_notice".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):void 0);if(void 0===t||1!=t){var r=document.createElement("div");r.classList.add("cookie","hidden"),r.innerHTML='<div class="cookie__container"><div class="row"><div class="col-md-4 offset-md-2"><button class="cookie__btn btn btn-white icon-clear">НАШ САЙТ ИСПОЛЬЗУЕТ COOKIE</button></div></div></div>',document.body.appendChild(r),r.classList.remove("hidden"),document.querySelector(".cookie__btn").addEventListener("click",(function(){(function(e,t,r){var n=(r=r||{}).expires;if("number"==typeof n&&n){var i=new Date;i.setTime(i.getTime()+1e3*n),n=r.expires=i}n&&n.toUTCString&&(r.expires=n.toUTCString());var o=e+"="+(t=encodeURIComponent(t));for(var s in r){o+="; "+s;var a=r[s];!0!==a&&(o+="="+a)}document.cookie=o})("cookie_notice",1),r.classList.add("hidden")}))}})(),(()=>{const e=document.querySelectorAll("[data-modal]"),t=document.querySelector("body"),r=document.querySelectorAll(".lock-padding");function n(e){e&&(e.classList.remove("open"),r.forEach((e=>{e.style.paddingRight="0px"})),t.style.paddingRight="0px",t.classList.remove("modal-lock"))}e.forEach((e=>{e.addEventListener("click",(function(i){const o=e.getAttribute("href").replace("#",""),s=document.getElementById(o);s&&(function(e){if(e){const i=document.querySelector(".popup.open");i?n(i):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";r.forEach((t=>{t.style.paddingRight=e})),t.style.paddingRight=e,t.classList.add("modal-lock")}(),e.classList.add("open")}}(s),i.preventDefault())}))})),document.querySelectorAll(".popup__close").forEach((e=>{e.addEventListener("click",(function(t){n(e.closest(".popup")),t.preventDefault()}))})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){const e=document.querySelector(".popup.open");e&&n(e)}}))})(),(()=>{async function e(e){e.preventDefault();const n=e.target,i=n.getAttribute("action"),o=function(e){let r=0;return e.querySelectorAll("[data-required]").forEach((e=>{var n;t(e),(e.matches("[name='email']")&&(n=e.value,!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase()))||e.matches("[type='checkbox']")&&!e.checked||""===e.value.trim()||e.matches("[name='message']")&&e.value.trim().length<1||e.matches("[type='tel']")&&!function(e){const t=e.replace(/\D/g,"");return t.length>=10&&/^[1-9]\d{9,14}$/.test(t)}(e.value))&&(function(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}(e),r++)})),r}(n);if(0===o)try{if(n.classList.add("_sending"),!(await fetch(i,{method:"POST",body:new FormData(n)})).ok)throw new Error("Укажите URL, куда будет запрос в атрибуте action у формы");n.reset(),r()}catch(o){alert(o.message),r()}finally{n.classList.remove("_sending")}}function t(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error")}function r(){document.querySelector(".popup-thanks").classList.add("open"),document.querySelector("body").classList.add("modal-lock"),setTimeout((()=>{document.querySelectorAll(".popup").forEach((e=>{e.classList.remove("open")})),document.querySelector("body").classList.remove("modal-lock")}),2e3)}document.querySelectorAll("form").forEach((t=>{t.addEventListener("submit",e)})),document.addEventListener("input",(function(e){const{target:r}=e;r.classList.contains("_error")&&t(r)}))})(),(()=>{const e=document.querySelectorAll(".form__file-input");0!==e.length&&e.forEach((e=>{let t;e.addEventListener("change",(function(){const r=e.files;t&&t.remove(),0!==r.length&&(t=document.createElement("ul"),t.classList.add("form__files"),e.closest(".form__field").appendChild(t),Array.from(r).forEach(((r,n)=>{const i=document.createElement("li");i.classList.add("form__files-item");const o=document.createElement("div");o.classList.add("form__files-name"),o.textContent=r.name;const s=document.createElement("button");s.type="button",s.classList.add("form__files-remove","icon-clear"),s.addEventListener("click",(function(){t.removeChild(i),0===t.children.length&&(t.remove(),e.value="")})),i.appendChild(o),i.appendChild(s),t.appendChild(i)})))}))}))})(),document.getElementById("map")&&function(){ymaps.ready((function(){var e=new ymaps.Map("map",{center:t,zoom:17},{suppressMapOpenBlock:!0});e.controls.add("zoomControl");var n=new ymaps.Placemark(r,{},{preset:"twirl#redIcon"});e.geoObjects.add(n),e.controls.remove("routeEditor")}));let e=document.getElementById("map"),t=e.getAttribute("data-center").split(",").map(Number),r=e.getAttribute("data-placemark").split(",").map(Number)}(),document.querySelectorAll('input[name="date"]')?.forEach((e=>{new t(e,{})})),document.querySelectorAll('input[name="time"]')?.forEach((t=>{new e(t,{startTime:"10:00",endTime:"19:30"})})),document.addEventListener("click",(e=>{const t=e.target;if(t.matches(".form__field-clear")){const e=t.closest(".form__field"),r=e?.querySelector(".form__input")||e?.querySelector(".form__textarea");r.value="",r.classList.remove("_input"),r.dispatchEvent(new Event("clear"))}if(t.closest(".icon-menu")&&(document.body.classList.toggle("menu-lock"),document.querySelector(".header").classList.toggle("open-menu")),t.classList.contains("products__filters-caption")&&(t.classList.toggle("active"),t.parentNode.nextElementSibling.classList.toggle("active")),t.matches(".swiper-pagination-current")){let e=t.closest(".slider");e&&e.swiper.slidePrev()}if(t.matches(".swiper-pagination-total")){let e=t.closest(".slider");e&&e.swiper.slideNext()}if(t.matches(".header__menu-link")&&t.getAttribute("href").startsWith("#")&&i(),t.closest(".header__logo")&&t.closest(".header__logo").getAttribute("href").startsWith("#")&&i(),t.matches(".products__card-btn")&&(t.classList.toggle("active"),r(t)),t.matches(".product__delete-btn")&&(t.classList.toggle("active"),t.matches(".active")?t.textContent="УДАЛИТЬ":t.textContent="Выбрать",r(t)),t.matches("[data-modal]")){if(!t.dataset.modal)return;let e=t.dataset.modal,r=document.querySelector(`.popup__menu-link[href="#${e}"]`);r&&r.click()}if(t.matches(".popup__menu-link")){e.preventDefault();let r=t.getAttribute("href").replace("#","");document.querySelectorAll(".popup__menu-link").forEach((e=>{e.classList.remove("active")})),document.querySelectorAll("[data-form]").forEach((e=>{e.classList.remove("active")})),document.querySelector(`[data-form="${r}"]`)?.classList.add("active"),t.classList.add("active")}"a"===t.tagName.toLowerCase()&&"#"==t.getAttribute("href")&&(e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}))})),document.querySelectorAll(".slider")&&document.querySelectorAll(".slider").forEach((e=>{const t=new Swiper(e,{slidesPerView:1,loop:!0,navigation:{nextEl:e.querySelector(".slider__next"),prevEl:e.querySelector(".slider__prev")},pagination:{el:e.querySelector(".slider__pagination"),type:"fraction",renderFraction:function(e,t){return'<span class="'+e+'"></span>/<span class="'+t+'"></span>'},formatFractionCurrent:function(e){return r(e)},formatFractionTotal:function(e){return r(e)}}});function r(e){return e<10?"0"+e:e}t.slides.forEach((e=>{e.addEventListener("click",(r=>{const n=e.getBoundingClientRect(),i=r.clientX-n.left,o=n.width;i<.5*o?t.slidePrev():i>.5*o&&t.slideNext()}))}))})),document.querySelector(".header__logo")&&(document.querySelector(".header__logo").addEventListener("mouseenter",(e=>{scrollY>document.querySelector(".header").offsetHeight&&n()})),document.querySelector(".header__top").addEventListener("mouseenter",(e=>{scrollY>document.querySelector(".header").offsetHeight&&n()})),document.querySelector(".header-fixed").addEventListener("mouseleave",(e=>{i()}))),document.querySelectorAll('[name="nda"]').length>0&&document.querySelectorAll('[name="nda"]').forEach((e=>{e.addEventListener("change",(e=>{e.target.checked?e.target?.closest("form")?.querySelector('button[type="submit"]').removeAttribute("disabled"):e.target?.closest("form")?.querySelector('button[type="submit"]').setAttribute("disabled","disabled")}))}));const o=document.querySelectorAll('input[name="product-color"]'),s=Array.from(document.querySelectorAll(".product__options-seem"));if(o&&s.length){const a=document.querySelector(".product__options-title");function c(){const e=document.querySelectorAll('[name="product-color"]'),t=Array.from(e).map((e=>e.value)),r=document.createElement("div");r.style.display="none",document.body.appendChild(r),t.forEach((e=>{const t=document.createElement("img");let n=`../img/colors/${e}.png`;t.src=n,t.onerror=()=>{console.warn(`Image not found: ${n}`)},r.appendChild(t)})),setTimeout((()=>{document.body.removeChild(r)}),3e3)}o.forEach((e=>{e.addEventListener("change",(function(){this.checked&&window.requestAnimationFrame((()=>{const e=this.value;s.forEach((e=>{e.classList.remove("active")}));const t=document.querySelector(`.product__options-seem[src*="${e}.png"]`);t?(t.classList.add("active"),a.textContent=t.getAttribute("title")):console.warn(`Image for value ${e} not found`)}))}))})),c()}}))})();