(()=>{"use strict";gsap.registerPlugin(ScrollTrigger);class e{constructor(e,t){this.input=e,this.startTime=t.startTime||"10:00",this.endTime=t.endTime||"19:30",this.timeInterval=30,this.timepicker=null,this.createTimepicker(),this.addEventListeners()}createTimepicker(){this.timepicker=document.createElement("div"),this.timepicker.classList.add("timepicker");const e=document.createElement("div");e.classList.add("timepicker__items");let t=this.parseTime(this.startTime);const r=this.parseTime(this.endTime);for(;t<=r;){const r=this.formatTime(t),o=document.createElement("button");o.type="button",o.classList.add("timepicker__item"),o.textContent=r,o.addEventListener("click",(()=>{this.input.value=r,this.hideTimepicker()})),e.appendChild(o),t=this.addMinutes(t,this.timeInterval)}this.timepicker.appendChild(e),this.input.parentNode.insertBefore(this.timepicker,this.input.nextSibling)}addEventListeners(){this.input.addEventListener("focus",(()=>{this.showTimepicker()})),this.input.addEventListener("blur",(()=>{setTimeout((()=>this.hideTimepicker()),200)}))}showTimepicker(){this.timepicker.classList.add("active")}hideTimepicker(){this.timepicker.classList.remove("active")}parseTime(e){const[t,r]=e.split(":").map(Number),o=new Date;return o.setHours(t,r,0,0),o}formatTime(e){return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}addMinutes(e,t){return new Date(e.getTime()+6e4*t)}}Datepicker.locales.ru={days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вск","Пнд","Втр","Срд","Чтв","Птн","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",format:"dd.mm.yyyy",weekStart:1,monthsTitle:"Месяцы"},document.addEventListener("DOMContentLoaded",(()=>{function t(e){e.classList.contains("active")?document.querySelector(".header__menu-cart").innerHTML++:document.querySelector(".header__menu-cart").innerHTML--,r(),setTimeout((()=>{o()}),2e3),document.querySelector(".header__menu-cart").innerHTML>0?document.querySelector(".header__menu-cart").classList.add("active"):document.querySelector(".header__menu-cart").classList.remove("active")}function r(){let e=document.querySelector(".header__logo");e.classList.contains("clip-logo")&&(document.body.style.setProperty("margin-top",`${document.querySelector(".header__wrapper").offsetHeight}px`),document.querySelector(".header").classList.add("fixed"),e.classList.add("visible"))}function o(){document.body.style="",document.querySelector(".header").classList.remove("fixed"),document.querySelector(".header__logo").classList.remove("visible")}(()=>{const e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};function t(){e.any()||window.innerWidth<992?(document.body.classList.remove("_pc"),document.body.classList.add("_touch")):(document.body.classList.remove("_touch"),document.body.classList.add("_pc"))}t(),window.addEventListener("resize",(()=>{t()}))})(),function(e){let t=new Image;t.onload=t.onerror=function(){1==(2==t.height)?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{function e(e){e.value.length>0?e.classList.add("_input"):e.classList.remove("_input")}document.querySelectorAll(".form__field > .form__input, .form__field > .form__textarea").forEach((t=>{const r=t=>e(t.target);["input","blur","focus","change","keyup","mouseup"].forEach((e=>{t.addEventListener(e,r)})),e(t)}))})(),(()=>{function e(e){if(!e)return;const t=window.innerWidth<1600,r=t?50:25,o=e.closest(".popup")||window,n=e.querySelector(".header__logo-current"),i=r/3;gsap.set(e,{scale:1}),gsap.set(n,{autoAlpha:1});const c=t?0:.465;ScrollTrigger.create({trigger:e,scroller:o,start:0,end:i,scrub:!0,onUpdate:t=>{const r=t.progress,o=1-c*r;gsap.to(e,{scale:o,duration:0})},onEnter:()=>{e.classList.add("init-animation")},onLeaveBack:()=>{e.classList.remove("init-animation")}}),ScrollTrigger.create({trigger:e,scroller:o,start:2*i,end:r,scrub:!0,onUpdate:t=>{gsap.to(n,{autoAlpha:1,duration:0}),gsap.to(e,{scale:1-c,duration:0})},onLeave:()=>{e.classList.add("clip-logo")},onEnterBack:()=>{e.classList.remove("clip-logo"),setTimeout((()=>{n.style=""}),0)}}),ScrollTrigger.create({trigger:e,scroller:o,start:r,end:"+=300",scrub:!0,onUpdate:t=>{gsap.to(n,{autoAlpha:0,duration:0}),gsap.to(e,{scale:1-c,duration:0})}})}document.querySelectorAll(".header__logo").forEach((t=>{e(t)})),window.addEventListener("resize",(function(){ScrollTrigger.getAll().forEach((e=>e.kill())),document.querySelectorAll(".header__logo").forEach((t=>{t.classList.remove("clip-logo"),e(t)}))}))})(),(()=>{var e=document.querySelectorAll('input[type="tel"]'),t=function(e){return e.value.replace(/\D/g,"")},r=function(e){var r=e.target,o=t(r),n=e.clipboardData||window.clipboardData;if(n){var i=n.getData("Text");if(/\D/g.test(i))return void(r.value=o)}},o=function(e){var r=e.target,o=t(r),n=r.selectionStart,i="";if(!o)return r.value="";if(r.value.length==n){if(["7","8","9"].indexOf(o[0])>-1){"9"==o[0]&&(o="7"+o);var c="8"==o[0]?"8":"+7";i=r.value=c+" ",o.length>1&&(i+="("+o.substring(1,4)),o.length>=5&&(i+=") "+o.substring(4,7)),o.length>=8&&(i+="-"+o.substring(7,9)),o.length>=10&&(i+="-"+o.substring(9,11))}else i="+"+o.substring(0,16);r.value=i}else e.data&&/\D/g.test(e.data)&&(r.value=o)},n=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(var i of e)i.addEventListener("keydown",n),i.addEventListener("input",o,!1),i.addEventListener("paste",r,!1)})(),(()=>{if(!document.querySelector(".products__filters"))return;const e=document.querySelectorAll(".products__filters-column"),t=document.querySelectorAll('input[name="start-price"], input[name="end-price"]');let r;function o(e){const t=e.querySelector(".products__filters-clear");e.querySelector(".products__filters-input:checked")?t.classList.remove("hidden"):t.classList.add("hidden")}function n(){clearTimeout(r),r=setTimeout((()=>{!function(){const e=document.querySelector(".products__body");e.classList.add("_loading"),setTimeout((()=>{e.classList.remove("_loading")}),500)}()}),300)}document.querySelector(".products__filters"),e.forEach((e=>{const t=e.querySelector(".products__filters-clear"),r=e.querySelectorAll(".products__filters-input");r.length>0&&r.forEach((t=>{t.addEventListener("change",(()=>{o(e),n()}))})),t&&t.addEventListener("click",(()=>{r.forEach((e=>{e.checked=!1})),o(e),n()}))})),t.forEach((e=>{e.addEventListener("keydown",(e=>{e.key>="0"&&e.key<="9"||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.preventDefault()})),e.addEventListener("focus",(()=>{e.value=e.value.replace(" ₽/м²","")})),e.addEventListener("blur",(()=>{const t=e.value.replace(/\D/g,"");0!==e.value.length&&(e.value=`${t} ₽/м²`,n())}))}))})(),(()=>{var e,t=("cookie_notice",(e=document.cookie.match(new RegExp("(?:^|; )"+"cookie_notice".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):void 0);if(void 0===t||1!=t){var r=document.createElement("div");r.classList.add("cookie","hidden"),r.innerHTML='<div class="cookie__container"><div class="row"><div class="col-md-4 offset-md-2"><button class="cookie__btn btn btn-white icon-clear">НАШ САЙТ ИСПОЛЬЗУЕТ COOKIE</button></div></div></div>',document.body.appendChild(r),r.classList.remove("hidden"),document.querySelector(".cookie__btn").addEventListener("click",(function(){(function(e,t,r){var o=(r=r||{}).expires;if("number"==typeof o&&o){var n=new Date;n.setTime(n.getTime()+1e3*o),o=r.expires=n}o&&o.toUTCString&&(r.expires=o.toUTCString());var i=e+"="+(t=encodeURIComponent(t));for(var c in r){i+="; "+c;var a=r[c];!0!==a&&(i+="="+a)}document.cookie=i})("cookie_notice",1),r.classList.add("hidden")}))}})(),(()=>{const e=document.querySelectorAll("[data-modal]"),t=document.querySelector("body"),r=document.querySelectorAll(".lock-padding");function o(e){e&&(e.classList.remove("open"),r.forEach((e=>{e.style.paddingRight="0px"})),t.style.paddingRight="0px",t.classList.remove("modal-lock"))}e.forEach((e=>{e.addEventListener("click",(function(n){const i=e.getAttribute("href").replace("#",""),c=document.getElementById(i);c&&(function(e){if(e){const n=document.querySelector(".popup.open");n?o(n):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";r.forEach((t=>{t.style.paddingRight=e})),t.style.paddingRight=e,t.classList.add("modal-lock")}(),e.classList.add("open")}}(c),n.preventDefault())}))})),document.querySelectorAll(".popup__close").forEach((e=>{e.addEventListener("click",(function(t){o(e.closest(".popup")),t.preventDefault()}))})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){const e=document.querySelector(".popup.open");e&&o(e)}}))})(),(()=>{async function e(e){e.preventDefault();const o=e.target,n=o.getAttribute("action"),i=function(e){let r=0;return e.querySelectorAll("[data-required]").forEach((e=>{var o;t(e),(e.matches("[name='email']")&&(o=e.value,!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(o).toLowerCase()))||e.matches("[type='checkbox']")&&!e.checked||""===e.value.trim()||e.matches("[name='message']")&&e.value.trim().length<1||e.matches("[type='tel']")&&!function(e){const t=e.replace(/\D/g,"");return t.length>=10&&/^[1-9]\d{9,14}$/.test(t)}(e.value))&&(function(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}(e),r++)})),r}(o);if(0===i)try{if(o.classList.add("_sending"),!(await fetch(n,{method:"POST",body:new FormData(o)})).ok)throw new Error("Укажите URL, куда будет запрос в атрибуте action у формы");o.reset(),r()}catch(i){alert(i.message),r()}finally{o.classList.remove("_sending")}}function t(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error")}function r(){document.querySelector(".popup-thanks").classList.add("open"),document.querySelector("body").classList.add("modal-lock"),setTimeout((()=>{document.querySelectorAll(".popup").forEach((e=>{e.classList.remove("open")})),document.querySelector("body").classList.remove("modal-lock")}),2e3)}document.querySelectorAll("form").forEach((t=>{t.addEventListener("submit",e)})),document.addEventListener("input",(function(e){const{target:r}=e;r.classList.contains("_error")&&t(r)}))})(),(()=>{const e=document.querySelectorAll(".form__file-input");0!==e.length&&e.forEach((e=>{let t;e.addEventListener("change",(function(){const r=e.files;t&&t.remove(),0!==r.length&&(t=document.createElement("ul"),t.classList.add("form__files"),e.closest(".form__field").appendChild(t),Array.from(r).forEach(((r,o)=>{const n=document.createElement("li");n.classList.add("form__files-item");const i=document.createElement("div");i.classList.add("form__files-name"),i.textContent=r.name;const c=document.createElement("button");c.type="button",c.classList.add("form__files-remove","icon-clear"),c.addEventListener("click",(function(){t.removeChild(n),0===t.children.length&&(t.remove(),e.value="")})),n.appendChild(i),n.appendChild(c),t.appendChild(n)})))}))}))})(),document.querySelectorAll('input[name="date"]')?.forEach((e=>{new Datepicker(e,{language:"ru",todayBtn:!1,weekNumbers:0,clearBtn:!1,autohide:!0,prevArrow:"←",nextArrow:"→",showOnFocus:!0})})),document.querySelectorAll('input[name="time"]')?.forEach((t=>{new e(t,{startTime:"10:00",endTime:"19:30"})})),document.addEventListener("click",(e=>{const r=e.target;if(r.matches(".form__field-clear")){const e=r.closest(".form__field"),t=e?.querySelector(".form__input");t.value="",t.classList.remove("_input")}if(r.closest(".icon-menu")&&(document.body.classList.toggle("menu-lock"),document.querySelector(".header").classList.toggle("open-menu")),r.classList.contains("products__filters-caption")&&(r.classList.toggle("active"),r.parentNode.nextElementSibling.classList.toggle("active")),r.matches(".swiper-pagination-current")){let e=r.closest(".slider");e&&e.swiper.slidePrev()}if(r.matches(".swiper-pagination-total")){let e=r.closest(".slider");e&&e.swiper.slideNext()}if(r.matches(".header__menu-link")&&r.getAttribute("href").startsWith("#")&&o(),r.closest(".header__logo")&&r.closest(".header__logo").getAttribute("href").startsWith("#")&&o(),r.matches(".products__card-btn")&&(r.classList.toggle("active"),t(r)),r.matches(".product__delete-btn")&&(r.classList.toggle("active"),r.matches(".active")?r.textContent="УДАЛИТЬ":r.textContent="Выбрать",t(r)),r.matches("[data-modal]")){if(!r.dataset.modal)return;let e=r.dataset.modal,t=document.querySelector(`.popup__menu-link[href="#${e}"]`);t&&t.click()}if(r.matches(".popup__menu-link")){e.preventDefault();let t=r.getAttribute("href").replace("#","");document.querySelectorAll(".popup__menu-link").forEach((e=>{e.classList.remove("active")})),document.querySelectorAll("[data-form]").forEach((e=>{e.classList.remove("active")})),document.querySelector(`[data-form="${t}"]`)?.classList.add("active"),r.classList.add("active")}"a"===r.tagName.toLowerCase()&&"#"==r.getAttribute("href")&&(e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}))})),document.querySelectorAll(".slider")&&document.querySelectorAll(".slider").forEach((e=>{const t=new Swiper(e,{slidesPerView:1,loop:!0,navigation:{nextEl:e.querySelector(".slider__next"),prevEl:e.querySelector(".slider__prev")},pagination:{el:e.querySelector(".slider__pagination"),type:"fraction",renderFraction:function(e,t){return'<span class="'+e+'"></span>/<span class="'+t+'"></span>'},formatFractionCurrent:function(e){return r(e)},formatFractionTotal:function(e){return r(e)}}});function r(e){return e<10?"0"+e:e}t.slides.forEach((e=>{e.addEventListener("click",(r=>{const o=e.getBoundingClientRect(),n=r.clientX-o.left,i=o.width;n<.5*i?t.slidePrev():n>.5*i&&t.slideNext()}))}))})),document.querySelector(".header__logo")&&(document.querySelector(".header__logo").addEventListener("mouseenter",(e=>{scrollY>document.querySelector(".header").offsetHeight&&r()})),document.querySelector(".header__top").addEventListener("mouseenter",(e=>{scrollY>document.querySelector(".header").offsetHeight&&r()})),document.querySelector(".header").addEventListener("mouseleave",(e=>{o()}))),document.querySelectorAll('[name="nda"]').length>0&&document.querySelectorAll('[name="nda"]').forEach((e=>{e.addEventListener("change",(e=>{e.target.checked?e.target?.closest("form")?.querySelector('button[type="submit"]').removeAttribute("disabled"):e.target?.closest("form")?.querySelector('button[type="submit"]').setAttribute("disabled","disabled")}))}));const n=document.querySelectorAll('input[name="product-color"]'),i=document.querySelector(".product__options-visual");if(n&&i){function c(){const e=document.querySelector(".product__options-visual");if(!e)return void console.warn("Block with class .product__options-visual not found");let t=getComputedStyle(e).getPropertyValue("--seam-color").trim();t=t.replace(/^url\(["']?/,"").replace(/["']?\)$/,"");const r=t.substring(0,t.lastIndexOf("/")+1),o=document.querySelectorAll('[name="product-color"]'),n=Array.from(o).map((e=>e.value)),i=document.createElement("div");i.style.display="none",document.body.appendChild(i),n.forEach((e=>{const t=document.createElement("img");let o=`${r}${e}.png`;t.src=o,t.onerror=()=>{console.warn(`Image not found: ${o}`)},i.appendChild(t)})),setTimeout((()=>{document.body.removeChild(i)}),3e3)}n.forEach((e=>{e.addEventListener("change",(function(){this.checked&&i.style.setProperty("--seam-color",`url('../img/colors/${this.value}.png')`)}))})),c()}}))})();