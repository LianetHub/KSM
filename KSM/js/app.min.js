(()=>{"use strict";gsap.registerPlugin(ScrollTrigger);document.addEventListener("DOMContentLoaded",(()=>{function e(e){e.classList.contains("active")?document.querySelector(".header__menu-cart").innerHTML++:document.querySelector(".header__menu-cart").innerHTML--,t(),setTimeout((()=>{o()}),2e3),document.querySelector(".header__menu-cart").innerHTML>0?document.querySelector(".header__menu-cart").classList.add("active"):document.querySelector(".header__menu-cart").classList.remove("active")}function t(){let e=document.querySelector(".header__logo");e.classList.contains("clip-logo")&&(document.body.style.setProperty("margin-top",`${document.querySelector(".header__wrapper").offsetHeight}px`),document.querySelector(".header").classList.add("fixed"),e.classList.add("visible"))}function o(){document.body.style="",document.querySelector(".header").classList.remove("fixed"),document.querySelector(".header__logo").classList.remove("visible")}(()=>{const e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};function t(){e.any()||window.innerWidth<992?(document.body.classList.remove("_pc"),document.body.classList.add("_touch")):(document.body.classList.remove("_touch"),document.body.classList.add("_pc"))}t(),window.addEventListener("resize",(()=>{t()}))})(),function(e){let t=new Image;t.onload=t.onerror=function(){1==(2==t.height)?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{function e(e){e.value.length>0?e.classList.add("_input"):e.classList.remove("_input")}document.querySelectorAll(".form__field > .form__input, .form__field > .form__textarea").forEach((t=>{const o=t=>e(t.target);["input","blur","focus","change","keyup","mouseup"].forEach((e=>{t.addEventListener(e,o)})),e(t)}))})(),(()=>{function e(){const e=document.querySelector(".header__logo");if(!e)return;const t=window.innerWidth<1600,o=t?50:25,r=document.querySelector(".header__logo-current"),n=o/3;gsap.set(e,{scale:1}),gsap.set(r,{autoAlpha:1});const c=t?0:.465;ScrollTrigger.create({trigger:e,start:0,end:n,scrub:!0,onUpdate:t=>{const o=t.progress,r=1-c*o;gsap.to(e,{scale:r,duration:0})},onEnter:()=>{e.classList.add("init-animation")},onLeaveBack:()=>{e.classList.remove("init-animation")}}),ScrollTrigger.create({trigger:e,start:2*n,end:o,scrub:!0,onUpdate:t=>{gsap.to(r,{autoAlpha:1,duration:0}),gsap.to(e,{scale:1-c,duration:0})},onLeave:()=>{e.classList.add("clip-logo")},onEnterBack:()=>{e.classList.remove("clip-logo")}}),ScrollTrigger.create({trigger:e,start:o,end:"+=300",scrub:!0,onUpdate:t=>{gsap.to(r,{autoAlpha:0,duration:0}),gsap.to(e,{scale:1-c,duration:0})}})}e(),window.addEventListener("resize",(function(){ScrollTrigger.getAll().forEach((e=>e.kill())),document.querySelector(".header__logo").classList.remove("clip-logo"),e()}))})(),(()=>{var e=document.querySelectorAll('input[type="tel"]'),t=function(e){return e.value.replace(/\D/g,"")},o=function(e){var o=e.target,r=t(o),n=e.clipboardData||window.clipboardData;if(n){var c=n.getData("Text");if(/\D/g.test(c))return void(o.value=r)}},r=function(e){var o=e.target,r=t(o),n=o.selectionStart,c="";if(!r)return o.value="";if(o.value.length==n){if(["7","8","9"].indexOf(r[0])>-1){"9"==r[0]&&(r="7"+r);var a="8"==r[0]?"8":"+7";c=o.value=a+" ",r.length>1&&(c+="("+r.substring(1,4)),r.length>=5&&(c+=") "+r.substring(4,7)),r.length>=8&&(c+="-"+r.substring(7,9)),r.length>=10&&(c+="-"+r.substring(9,11))}else c="+"+r.substring(0,16);o.value=c}else e.data&&/\D/g.test(e.data)&&(o.value=r)},n=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(var c of e)c.addEventListener("keydown",n),c.addEventListener("input",r,!1),c.addEventListener("paste",o,!1)})(),(()=>{if(!document.querySelector(".products__filters"))return;const e=document.querySelectorAll(".products__filters-column"),t=document.querySelectorAll('input[name="start-price"], input[name="end-price"]');let o;function r(e){const t=e.querySelector(".products__filters-clear");e.querySelector(".products__filters-input:checked")?t.classList.remove("hidden"):t.classList.add("hidden")}function n(){clearTimeout(o),o=setTimeout((()=>{!function(){const e=document.querySelector(".products__body");e.classList.add("_loading"),setTimeout((()=>{e.classList.remove("_loading")}),500)}()}),500)}document.querySelector(".products__filters"),e.forEach((e=>{const t=e.querySelector(".products__filters-clear"),o=e.querySelectorAll(".products__filters-input");o.length>0&&o.forEach((t=>{t.addEventListener("change",(()=>{r(e),n()}))})),t&&t.addEventListener("click",(()=>{o.forEach((e=>{e.checked=!1})),r(e),n()}))})),t.forEach((e=>{e.addEventListener("keydown",(e=>{e.key>="0"&&e.key<="9"||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.preventDefault()})),e.addEventListener("focus",(()=>{e.value=e.value.replace(" ₽/м²","")})),e.addEventListener("blur",(()=>{const t=e.value.replace(/\D/g,"");0!==e.value.length&&(e.value=`${t} ₽/м²`),n()}))}))})(),(()=>{var e,t=("cookie_notice",(e=document.cookie.match(new RegExp("(?:^|; )"+"cookie_notice".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):void 0);if(void 0===t||1!=t){var o=document.createElement("div");o.classList.add("cookie","hidden"),o.innerHTML='<div class="cookie__container"><div class="row"><div class="col-md-4 offset-md-2"><button class="cookie__btn btn btn-white icon-clear">НАШ САЙТ ИСПОЛЬЗУЕТ COOKIE</button></div></div></div>',document.body.appendChild(o),o.classList.remove("hidden"),document.querySelector(".cookie__btn").addEventListener("click",(function(){(function(e,t,o){var r=(o=o||{}).expires;if("number"==typeof r&&r){var n=new Date;n.setTime(n.getTime()+1e3*r),r=o.expires=n}r&&r.toUTCString&&(o.expires=r.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var a in o){c+="; "+a;var i=o[a];!0!==i&&(c+="="+i)}document.cookie=c})("cookie_notice",1),o.classList.add("hidden")}))}})(),(()=>{const e=document.querySelectorAll("[data-modal]"),t=document.querySelector("body"),o=document.querySelectorAll(".lock-padding");function r(e){e&&(e.classList.remove("open"),o.forEach((e=>{e.style.paddingRight="0px"})),t.style.paddingRight="0px",t.classList.remove("modal-lock"))}e.forEach((e=>{e.addEventListener("click",(function(n){const c=e.getAttribute("href").replace("#",""),a=document.getElementById(c);a&&(function(e){if(e){const n=document.querySelector(".popup.open");n?r(n):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";o.forEach((t=>{t.style.paddingRight=e})),t.style.paddingRight=e,t.classList.add("modal-lock")}(),e.classList.add("open")}}(a),n.preventDefault())}))})),document.querySelectorAll(".popup__close").forEach((e=>{e.addEventListener("click",(function(t){r(e.closest(".popup")),t.preventDefault()}))})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){const e=document.querySelector(".popup.open");e&&r(e)}}))})(),(()=>{async function e(e){e.preventDefault(),document.querySelector(".popup-thanks").classList.add("open"),document.querySelector("body").classList.add("modal-lock"),setTimeout((()=>{document.querySelectorAll(".popup").forEach((e=>{e.classList.remove("open")})),document.querySelector("body").classList.remove("modal-lock")}),2e3)}document.querySelectorAll("form").forEach((t=>{t.addEventListener("submit",e)}))})(),document.addEventListener("click",(t=>{const r=t.target;if(r.matches(".form__field-clear")&&(r.previousElementSibling.value="",r.previousElementSibling.classList.remove("_input")),r.closest(".icon-menu")&&(document.body.classList.toggle("menu-lock"),document.querySelector(".header").classList.toggle("open-menu")),r.classList.contains("products__filters-caption")&&(r.classList.toggle("active"),r.parentNode.nextElementSibling.classList.toggle("active")),r.matches(".swiper-pagination-current")){let e=r.closest(".slider");e&&e.swiper.slidePrev()}if(r.matches(".swiper-pagination-total")){let e=r.closest(".slider");e&&e.swiper.slideNext()}if(r.matches(".header__menu-link")&&r.getAttribute("href").startsWith("#")&&o(),r.closest(".header__logo")&&r.closest(".header__logo").getAttribute("href").startsWith("#")&&o(),r.matches(".products__card-btn")&&(r.classList.toggle("active"),e(r)),r.matches(".product__delete-btn")&&(r.classList.toggle("active"),r.matches(".active")?r.textContent="УДАЛИТЬ":r.textContent="Выбрать",e(r)),r.matches("[data-modal]")){if(!r.dataset.modal)return;let e=r.dataset.modal,t=document.querySelector(`.popup__menu-link[href="#${e}"]`);t&&t.click()}if(r.matches(".popup__menu-link")){t.preventDefault();let e=r.getAttribute("href").replace("#","");document.querySelectorAll(".popup__menu-link").forEach((e=>{e.classList.remove("active")})),document.querySelectorAll("[data-form]").forEach((e=>{e.classList.remove("active")})),document.querySelector(`[data-form="${e}"]`)?.classList.add("active"),r.classList.add("active")}})),document.querySelectorAll(".slider")&&document.querySelectorAll(".slider").forEach((e=>{const t=new Swiper(e,{slidesPerView:1,loop:!0,navigation:{nextEl:e.querySelector(".slider__next"),prevEl:e.querySelector(".slider__prev")},pagination:{el:e.querySelector(".slider__pagination"),type:"fraction",renderFraction:function(e,t){return'<span class="'+e+'"></span>/<span class="'+t+'"></span>'},formatFractionCurrent:function(e){return o(e)},formatFractionTotal:function(e){return o(e)}}});function o(e){return e<10?"0"+e:e}t.slides.forEach((e=>{e.addEventListener("click",(o=>{const r=e.getBoundingClientRect(),n=o.clientX-r.left,c=r.width;n<.1*c?t.slidePrev():n>.9*c&&t.slideNext()}))}))})),document.querySelector(".header__logo")&&(document.querySelector(".header__logo").addEventListener("mouseenter",(e=>{scrollY>document.querySelector(".header").offsetHeight&&t()})),document.querySelector(".header__top").addEventListener("mouseenter",(e=>{scrollY>document.querySelector(".header").offsetHeight&&t()})),document.querySelector(".header").addEventListener("mouseleave",(e=>{o()}))),document.querySelectorAll('[name="nda"]').length>0&&document.querySelectorAll('[name="nda"]').forEach((e=>{e.addEventListener("change",(e=>{e.target.checked?e.target?.closest("form")?.querySelector('button[type="submit"]').removeAttribute("disabled"):e.target?.closest("form")?.querySelector('button[type="submit"]').setAttribute("disabled","disabled")}))}));const r=document.querySelectorAll('input[name="product-color"]'),n=document.querySelector(".product__options-visual");if(r&&n){function c(){const e=document.querySelector(".product__options-visual");if(!e)return void console.warn("Block with class .product__options-visual not found");let t=getComputedStyle(e).getPropertyValue("--seam-color").trim();t=t.replace(/^url\(["']?/,"").replace(/["']?\)$/,"");const o=t.substring(0,t.lastIndexOf("/")+1),r=document.querySelectorAll('[name="product-color"]'),n=Array.from(r).map((e=>e.value)),c=document.createElement("div");c.style.display="none",document.body.appendChild(c),n.forEach((e=>{const t=document.createElement("img");let r=`${o}${e}.png`;t.src=r,t.onerror=()=>{console.warn(`Image not found: ${r}`)},c.appendChild(t)})),setTimeout((()=>{document.body.removeChild(c)}),3e3)}r.forEach((e=>{e.addEventListener("change",(function(){this.checked&&n.style.setProperty("--seam-color",`url('../img/colors/${this.value}.png')`)}))})),c()}}))})();